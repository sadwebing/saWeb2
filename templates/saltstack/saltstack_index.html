{% if title %}
    <title>{{title}}</title>
{% else %}
    <title>管理中心</title>
{% endif %}
<style>
    hr {
        margin-top:5px;
        margin-bottom: 3px;
    },
 </style>
    <div class="placeholder">
        <div class="panel panel-default" style="margin-bottom: 5px;">
            <div class="panel-heading">
                <h4 class="panel-title">执行参数</h4>
            </div>
            <div class="panel-body" style="padding-top: 5px; padding-bottom: 5px;">
            <div class="row">
            <div class="col-xs-9 col-sm-9 col-md-9">
                {% if user.is_superuser %}
                <div class="col-xs-12 col-sm-12 col-md-12">
                    <form class="form-group form-inline" role="form" style="margin-bottom: 5px;">
                        <div class="input-group">
                            <span class="input-group-btn">
                                <button id="command_panel" class="btn btn-info" type="submit" title="展开" style="width: 35px;">+</button>
                            </span>
                            <span class="form-control" style="width: auto;">基本操作</span>
                        </div>
                        <span class="form-control" style="margin-left: 20px;">执行用户
                            <div class="radio">
                                <label>
                                    <input type="radio" name="commandform_user" value="root" style="margin-left: 10px;" checked> root
                                </label>
                            </div>
                        </span>
                    </form>
                </div>
                <div class="col-xs-12 col-sm-12 col-md-12" id="command_form" style="display: none; background-color: #F0F8FF;">
                    <br size=1>
                    <div class="col-xs-11 col-sm-11 col-md-11">
                        <form id="commandform" class="form-group form-inline" role="form">
                            <select class="form-control selectpicker show-tick" id="expr_form" data-width="18%"> 
                                <option value="glob">默认</option> 
                                <option value="list">列表</option> 
                                <option value="pcre">正则</option> 
                                {% comment %}
                                <option value="nodegroup">组</option>
                                <option value="grain">grain</option> 
                                <option value="pillar">pillar</option>  
                                {% endcomment %}
                            </select>
                            <input type="text" class="form-control" id="target" placeholder="ID" value="" style="width: 80%;" required>
                        </form>
                        <form id="commandform" class="form-group form-inline" role="form">
                            <select class="form-control selectpicker show-tick" id="function" onchange="operate.ChangeArgumentsStyle('function', 'arguments')" data-width="18%"> 
                                <option value="cmd.run">cmd.run</option>
                                <option value="state.sls">state.sls</option>
                                <option value="test.ping">test.ping</option>
                            </select>
                            <input type="text" class="form-control" id="arguments" placeholder="参数" style="width: 80%;" value="" required>
                        </form>
                    </div>
                
                    <div class="col-xs-1 col-sm-1 col-md-1">
                        <input id="btn_submit_command" type="submit" onclick="operate.Submit('btn_submit_command')" class="btn btn-default" style="width:100%; height:82px;" value="执行">
                    </div>
                </div>
                {% endif %}

                {% if manage == 1 %}
                <div class="col-xs-12 col-sm-12 col-md-12">
                    <form class="form-group form-inline" role="form" style="margin-bottom: 5px;">
                        <hr size=1>
                        <div class="input-group">
                            <span class="input-group-btn">
                                <button id="command2_panel" class="btn btn-info" type="submit" title="展开" style="width: 35px;">+</button>
                            </span>
                            <span class="form-control" style="width: auto;">服务操作</span>
                        </div>
                        <span class="form-control" style="margin-left: 20px;">执行用户
                            <div class="radio">
                                <label>
                                    <input type="radio" name="commandform2_user" value="root" style="margin-left: 10px;" checked> root
                                </label>
                            </div>
                        </span>
                    </form>
                </div>
                <div class="col-xs-12 col-sm-12 col-md-12" id="command2_form" style="display: none; background-color: #F0F8FF;">
                    <br>
                    <div class="col-xs-11 col-sm-11 col-md-11">
                        <form class="form-group form-inline" role="form" id="projectreform" name="projectreform"> 
                            <select class="form-control selectpicker show-tick" data-live-search="true" onchange="gp.GetProjectServers(1, 'minions_id')" id="project_active" name="project_active" title="请选择项目名" data-actions-box="true" multiple data-width="45%">
                            </select>
                            <select class="form-control selectpicker show-tick" data-live-search="true" id="minions_id" name="minions_id" title="请选择服务器地址" multiple data-actions-box="true" data-width="35%">
                            </select>
                            <select class="form-control selectpicker show-tick" id="function2" onchange="operate.ChangeArgumentsStyle('function2', 'arguments2')" data-width="18%"> 
                                <option value="cmd.run">cmd.run</option>
                                <option value="state.sls">state.sls</option>
                                <option value="test.ping">test.ping</option>
                            </select>
                        </form>
                        <form class="form-group form-inline" role="form">
                            <input type="text" class="form-control" id="arguments2" placeholder="参数" style="width: 99%;" value="" required>
                        </form>
                    </div>
                
                    <div class="col-xs-1 col-sm-1 col-md-1">
                        <form class="form-group form-inline" role="form">
                            <input id="btn_submit_command2" type="button" onclick="operate.Submit('btn_submit_command2')" class="btn btn-default" style="width: 100%; height:82px;" value="执行">
                        </form>
                    </div>
                </div>
                {% endif %}
                <div class="col-xs-12 col-sm-12 col-md-12" style="margin-bottom: 5px;">
                    <hr size=1>
                    <div class="input-group">
                        <span class="input-group-btn">
                            <button id="restart_panel" class="btn btn-info" type="submit" title="隐藏" style="width: 35px;">-</button>
                        </span>
                        <span class="form-control" style="width: auto;">配置推送</span>
                    </div>
                </div>
                <div class="col-xs-12 col-sm-12 col-md-12" id="restart_form" style="display: display; background-color: #F0F8FF;">
                    <br>
                    <div class="col-xs-11 col-sm-11 col-md-11">
                        <form id="restart_projectreform" name="restart_projectreform" class="form-inline" role="form">
                            <select class="form-control selectpicker show-tick" data-live-search="true" onchange="gp.GetProjectServers(2, 'restart_minion_id')" id="restart_project_active" name="restart_project_active" title="请选择项目名" data-width="45%">
                            </select>
                            <select class="form-control selectpicker show-tick" id="restart_minion_id" name="restart_minion_id" title="默认全选" data-width="35%" multiple data-actions-box="true">
                            </select>
                        </form>
                    </div>
                    <div class="col-xs-1 col-sm-1 col-md-1">
                        <form class="form-group form-inline" role="form">
                            <button id="btn_submit_deploy" type="submit" class="btn btn-default" style="width:100%;">推送</button>
                        </form>
                    </div>
                </div>
            </div>
            </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="runprogress" tabindex="-1" role="dialog"   
       aria-labelledby="runprogressLabel" aria-hidden="true" data-backdrop="static">   
       <div class="modal-dialog">  
           <div class="modal-content" >
                <div class="modal-header">
                    <span style="text-align:center;color:blue" id="progress_head">操作进行中，请勿刷新页面......</span><br/>
                </div>
                <div class="modal-body">
                    <div class="progress progress-striped active">  
                        <div class="progress-bar progress-bar-success" role="progressbar" id="progress_bar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 30%;">
                        </div>
                    </div>
                    <pre class="pre-scrollable" id="OperateRestartresults"></pre>
                </div>
                <div class="modal-footer" id="progressFooter">
                </div>
           </div>  
       </div>  
    </div>  

    <div class="placeholder">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">返回结果</h4>
            </div>
            <div class="panel-body">
                <pre class="pre-scrollable" id="commandresults"></pre>
            </div>
        </div>
    </div>
<script src="/static/custom/tablejs/public/public.js" type="text/javascript"></script>
<script src="/static/custom/tablejs/saltstack/command.js" type="text/javascript"></script>
<script src="/static/custom/tablejs/public/get_project.js" type="text/javascript"></script>